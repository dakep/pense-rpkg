<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract Residuals — residuals.pense_cvfit • pense</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extract Residuals — residuals.pense_cvfit"><meta property="og:description" content="Extract residuals from a PENSE (or LS-EN) regularization path with hyper-parameters
chosen by cross-validation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pense</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/computing_adapense.html">Estimating predictive models</a>
    </li>
    <li>
      <a href="../articles/lambda_grids.html">Controlling the grid of penalization levels</a>
    </li>
    <li>
      <a href="../articles/migration_guide.html">Migrating from pense version 1.x to 2.x</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/dakep/pense-rpkg/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract Residuals</h1>
    <small class="dont-index">Source: <a href="https://github.com/dakep/pense-rpkg/blob/HEAD/R/residuals-methods.R" class="external-link"><code>R/residuals-methods.R</code></a></small>
    <div class="hidden name"><code>residuals.pense_cvfit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract residuals from a PENSE (or LS-EN) regularization path with hyper-parameters
chosen by cross-validation.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for pense_cvfit</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  alpha <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lambda <span class="op">=</span> <span class="st">"min"</span>,</span>
<span>  se_mult <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  exact <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  correction <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>PENSE with cross-validated hyper-parameters to extract coefficients from.</p></dd>


<dt>alpha</dt>
<dd><p>Either a single number or <code>NULL</code> (default).
If given, only fits with the given <code>alpha</code> value are considered.
If <code>lambda</code> is a numeric value and <code>object</code> was fit with multiple <em>alpha</em>
values and no value is provided, the first value in <code>object$alpha</code> is used with a warning.</p></dd>


<dt>lambda</dt>
<dd><p>either a string specifying which penalty level to use
(<code>"min"</code>, <code>"se"</code>, <code>"{m}-se</code>")
or a single numeric value of the penalty parameter. See details.</p></dd>


<dt>se_mult</dt>
<dd><p>If <code>lambda = "se"</code>, the multiple of standard errors to tolerate.</p></dd>


<dt>exact</dt>
<dd><p>deprecated. Always gives a warning if <code>lambda</code> is not part of the fitted sequence and coefficients
are interpolated.</p></dd>


<dt>correction</dt>
<dd><p>defunct.</p></dd>


<dt>...</dt>
<dd><p>currently not used.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a numeric vector of residuals for the given penalization level.</p>
    </div>
    <div id="hyper-parameters">
    <h2>Hyper-parameters</h2>
    


<p>If <code>lambda = "{m}-se"</code> and <code>object</code> contains fitted estimates for every penalization
level in the sequence, use the fit the most parsimonious model with prediction performance
statistically indistinguishable from the best model.
This is determined to be the model with prediction performance within <code>m * cv_se</code>
from the best model.
If <code>lambda = "se"</code>, the multiplier <em>m</em> is taken from <code>se_mult</code>.</p>
<p>By default all <em>alpha</em> hyper-parameters available in the fitted object are considered.
This can be overridden by supplying one or multiple values in parameter <code>alpha</code>.
For example, if <code>lambda = "1-se"</code> and <code>alpha</code> contains two values, the "1-SE" rule is applied
individually for each <code>alpha</code> value, and the fit with the better prediction error is considered.</p>
<p>In case <code>lambda</code> is a number and <code>object</code> was fit for several <em>alpha</em> hyper-parameters,
<code>alpha</code> must also be given, or the first value in <code>object$alpha</code> is used with a warning.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other functions for extracting components: 
<code><a href="coef.pense_cvfit.html">coef.pense_cvfit</a>()</code>,
<code><a href="coef.pense_fit.html">coef.pense_fit</a>()</code>,
<code><a href="predict.pense_cvfit.html">predict.pense_cvfit</a>()</code>,
<code><a href="predict.pense_fit.html">predict.pense_fit</a>()</code>,
<code><a href="residuals.pense_fit.html">residuals.pense_fit</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Compute the LS-EN regularization path for Freeny's revenue data</span></span></span>
<span class="r-in"><span><span class="co"># (see ?freeny)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">freeny</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">freeny</span><span class="op">[</span> , <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">regpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="elnet.html">elnet</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">freeny</span><span class="op">$</span><span class="va">y</span>, alpha <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict the response using a specific penalization level</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">regpath</span>, newdata <span class="op">=</span> <span class="va">freeny</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>        lambda <span class="op">=</span> <span class="va">regpath</span><span class="op">$</span><span class="va">lambda</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">10</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1962.25   1962.5  1962.75     1963  1963.25 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9.071638 9.075877 9.082341 9.091051 9.103643 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract the residuals at a certain penalization level</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals</a></span><span class="op">(</span><span class="va">regpath</span>, lambda <span class="op">=</span> <span class="va">regpath</span><span class="op">$</span><span class="va">lambda</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Qtr1         Qtr2         Qtr3         Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1962              -0.396169224 -0.398919454 -0.378220695</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1963 -0.384593892 -0.294338479 -0.278030430 -0.259140970</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1964 -0.265543684 -0.219857551 -0.206023748 -0.173545125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1965 -0.192086388 -0.146253918 -0.133786817 -0.096671191</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1966 -0.090347926 -0.044601264 -0.027307275 -0.015531362</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1967  0.006739697  0.037235389  0.038869333  0.071407419</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1968  0.086275062  0.102036759  0.141643505  0.167310507</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1969  0.175437660  0.211500792  0.222942549  0.260029329</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1970  0.247870647  0.296181577  0.294470169  0.278217170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1971  0.306686546  0.334684047  0.353729154  0.367702082</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Select penalization level via cross-validation</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cv_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="elnet_cv.html">elnet_cv</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">freeny</span><span class="op">$</span><span class="va">y</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>                       cv_repl <span class="op">=</span> <span class="fl">10</span>, cv_k <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict the response using the "best" penalization level</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">cv_results</span>, newdata <span class="op">=</span> <span class="va">freeny</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1962.25   1962.5  1962.75     1963  1963.25 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8.795162 8.807070 8.824535 8.842175 8.882970 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extract the residuals at the "best" penalization level</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals</a></span><span class="op">(</span><span class="va">cv_results</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Qtr1         Qtr2         Qtr3         Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1962              -0.002801588 -0.015699794 -0.009674689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1963 -0.029165027  0.024539756  0.012794692  0.013400637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1964 -0.014177641  0.006727561 -0.001786569  0.012847301</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1965 -0.026214283 -0.003738367 -0.010414370 -0.002497682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1966 -0.014953173  0.014923561  0.008857587  0.002955549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1967 -0.002438578  0.011336771 -0.004817002 -0.002203485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1968 -0.014622332 -0.016038521  0.004783442  0.009509723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1969  0.008935501  0.025135859  0.011008309  0.028171208</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1970 -0.021812388  0.015300404 -0.005936032 -0.018484409</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1971 -0.011338929  0.005850584  0.003783641  0.007952774</span>
<span class="r-in"><span><span class="co"># Extract the residuals at a more parsimonious penalization level</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals</a></span><span class="op">(</span><span class="va">cv_results</span>, lambda <span class="op">=</span> <span class="st">"1.5-se"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               Qtr1          Qtr2          Qtr3          Qtr4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1962               -0.0133914763 -0.0253025812 -0.0180073467</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1963 -0.0375085950  0.0197904960  0.0063674275  0.0071084444</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1964 -0.0199445085  0.0028559476 -0.0059886764  0.0089958759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1965 -0.0300906249 -0.0052788324 -0.0128420949 -0.0036364879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1966 -0.0166186511  0.0137904162  0.0073750895  0.0016121587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1967 -0.0021618673  0.0116385091 -0.0046227113  0.0002016235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1968 -0.0117185912 -0.0127504673  0.0088610048  0.0131305182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1969  0.0114094522  0.0285319822  0.0147126545  0.0325247699</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1970 -0.0158575338  0.0222103711  0.0004937030 -0.0127802705</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1971 -0.0035765461  0.0133307584  0.0117139290  0.0154227310</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Kepplinger, Matías Salibián-Barrera, Gabriela Cohen Freue.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

